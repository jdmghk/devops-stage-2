services:
  reverse_proxy:
      image: traefik:v3.1
      container_name: "reverse_proxy"
      restart: unless-stopped
      command: 
        - --entrypoints.web.address=:80
        - --api.insecure=true  
        - --providers.file.watch=true
        - --providers.docker=true

      ports:
       - 80:80
       - 8092:8080
       - 443:443

      volumes:
       - /var/run/docker.sock:/var/run/docker.sock
       - ./scripts/certificates/conf/:/conf/
       - ./scripts/certificates/ssl/:/certs/
      
      networks:
       - proxy_network
      

  adminer:
    image: adminer 
    ports:
    - "8080:8080"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.adminer.rule=Host(`db.domain`)"
      - "traefik.http.services.adminer.loadbalancer.server.port=8080"  
    networks:
      - proxy_network
    restart: unless-stopped

networks:
  proxy_network:
    external: true
  
